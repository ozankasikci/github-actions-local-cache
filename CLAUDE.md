# Claude Development Notes

This file contains important development practices and reminders for this project.

## Code Quality Checklist

**ALWAYS run these commands before committing/pushing changes:**

1. **Run tests**: `npm test` or `npm run test:coverage`
2. **Run linter**: `npm run lint` 
3. **Build check**: `npm run build` (if applicable)

## Development Workflow

1. Make code changes
2. Add/update tests for new functionality
3. Run `npm test` to ensure all tests pass
4. Run `npm run lint` to check code quality
5. Fix any linting issues with `npm run lint:fix` if needed
6. Commit changes with descriptive message
7. Push to repository

## Testing

- Maintain high test coverage (currently 96%+)
- Add tests for new features and edge cases
- Use the existing test patterns and mock setup
- Run `npm run test:coverage` to check coverage

## Important Files

- `/lib/` - Source TypeScript files
- `/tests/` - Test files with comprehensive coverage
- `/dist/` - Build output (excluded from git, auto-generated by CI)
- `action.yml` - GitHub Action definition
- `package.json` - Dependencies and scripts

## Release Process

1. Update version in `package.json`
2. Create git tag: `git tag v1.x.x && git push origin v1.x.x`
3. GitHub Actions will automatically build and create release

## CI/CD Notes

- CI workflow has `contents: write` permission to update coverage badge
- Uses `GITHUB_TOKEN` for authentication when committing badge updates
- Coverage badge commits use `[skip ci]` to prevent infinite loops
- Badge updates only run on Node 20 to avoid race conditions between matrix jobs
- Handles push conflicts by pulling and rebasing if initial push fails

## Notes

- Always run linter before pushing to maintain code quality
- Coverage badge is automatically updated by CI
- Built files are excluded from git and generated during release
- Always run linter and fix any issues before releasing